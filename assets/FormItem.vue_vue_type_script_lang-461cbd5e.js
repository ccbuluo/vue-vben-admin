var Q=Object.defineProperty,X=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var Z=Object.prototype.hasOwnProperty,ee=Object.prototype.propertyIsEnumerable;var z=(e,f,h)=>f in e?Q(e,f,{enumerable:!0,configurable:!0,writable:!0,value:h}):e[f]=h,d=(e,f)=>{for(var h in f||(f={}))Z.call(f,h)&&z(e,h,f[h]);if(B)for(var h of B(f))ee.call(f,h)&&z(e,h,f[h]);return e},E=(e,f)=>X(e,Y(f));import{c as N,u as l,d as te,G as oe,n as se,l as g,i as ne,ac as H,z as le,E as ae}from"./vue-ea98dac5.js";import{c as J}from"./componentMap-e88eaca2.js";import{n as x,z as $,l as re,c as ce,a6 as ie,a7 as de,a8 as fe}from"./index.js";import{N as ue,c as K,s as me}from"./helper-ec539efd.js";import{i as he}from"./isNumber-f0336cfd.js";import{i as q}from"./isBoolean-9388e2d6.js";import{q as G,E as be,y as pe}from"./antd-c2e94c83.js";function ge(e){return"slot"in e}function Ce(e){return!ge(e)}function ye(e,f){return N(()=>{const h=l(e),{labelCol:v={},wrapperCol:R={}}=h.itemProps||{},{labelWidth:D,disabledLabelWidth:b}=h,{labelWidth:w,labelCol:S,wrapperCol:F,layout:_}=l(f);if(!w&&!D&&!S||b)return v.style={textAlign:"left"},{labelCol:v,wrapperCol:R};let y=D||w;const O=d(d({},S),v),T=d(d({},F),R);return y&&(y=he(y)?`${y}px`:y),{labelCol:d({style:{width:y}},O),wrapperCol:d({style:{width:_==="vertical"?"100%":`calc(100% - ${y})`}},T)}})}function W(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ne(e)}const Me=te({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object},isAdvanced:{type:Boolean}},setup(e,{slots:f}){const{t:h}=re(),{schema:v,formProps:R}=oe(e),D=ye(v,R),b=N(()=>{const{allDefaultValues:o,formModel:t,schema:a}=e,{mergeDynamicData:r}=e.formProps;return{field:a.field,model:t,values:d(d(d({},r),o),t),schema:a}}),w=N(()=>{var n;const{schema:o,tableAction:t,formModel:a,formActionType:r}=e;let{componentProps:s={}}=o;return x(s)&&(s=(n=s({schema:o,tableAction:t,formModel:a,formActionType:r}))!=null?n:{}),o.component==="Divider"&&(s=Object.assign({type:"horizontal"},{orientation:"left",plain:!0},s)),s}),S=N(()=>{const{disabled:o}=e.formProps,{dynamicDisabled:t}=e.schema,{disabled:a=!1}=l(w);let r=!!o||a;return q(t)&&(r=t),x(t)&&(r=t(l(b))),r});function F(){const{show:o,ifShow:t}=e.schema,{showAdvancedButton:a}=e.formProps,r=a&&q(e.isAdvanced)?e.isAdvanced:!0;let s=!0,n=!0;return q(o)&&(s=o),q(t)&&(n=t),x(o)&&(s=o(l(b))),x(t)&&(n=t(l(b))),s=s&&r,{isShow:s,isIfShow:n}}function _(){var M;const{rules:o=[],component:t,rulesMessageJoinLabel:a,label:r,dynamicRules:s,required:n}=e.schema;if(x(s))return s(l(b));let c=ce(o);const{rulesMessageJoinLabel:I}=e.formProps,P=(Reflect.has(e.schema,"rulesMessageJoinLabel")?a:I)?r:"",p=t?K(t)+P:P;function u(m,i){const C=m.message||p;return i===void 0||de(i)||Array.isArray(i)&&i.length===0||typeof i=="string"&&i.trim()===""||typeof i=="object"&&Reflect.has(i,"checked")&&Reflect.has(i,"halfChecked")&&Array.isArray(i.checked)&&Array.isArray(i.halfChecked)&&i.checked.length===0&&i.halfChecked.length===0?Promise.reject(C):Promise.resolve()}const L=x(n)?n(l(b)):n;L&&(!c||c.length===0?c=[{required:L,validator:u}]:c.findIndex(i=>Reflect.has(i,"required"))===-1&&c.push({required:L,validator:u}));const k=c.findIndex(m=>Reflect.has(m,"required")&&!Reflect.has(m,"validator"));if(k!==-1){const m=c[k],{isShow:i}=F();if(i||(m.required=!1),t){m.message=m.message||p,(t.includes("Input")||t.includes("Textarea"))&&(m.whitespace=!0);const C=(M=l(w))==null?void 0:M.valueFormat;me(m,t,C)}}const A=c.findIndex(m=>m.max);return A!==-1&&!c[A].validator&&(c[A].message=c[A].message||h("component.form.maxTip",[c[A].max])),c}function y(){var m;if(!Ce(e.schema))return null;const{renderComponentContent:o,component:t,field:a,changeEvent:r="change",valueField:s}=e.schema,n=t&&["Switch","Checkbox"].includes(t),c=`on${fe(r)}`,I={[c]:(...i)=>{const[C]=i;u[c]&&u[c](...i);const V=C?C.target:null,U=V?n?V.checked:V.value:C;e.setFormModel(a,U,e.schema)}},j=J.get(t),{autoSetPlaceHolder:P,size:p}=e.formProps,u=E(d({allowClear:!0,size:p},l(w)),{disabled:l(S)});!u.disabled&&P&&t!=="RangePicker"&&t&&(u.placeholder=((m=l(w))==null?void 0:m.placeholder)||K(t)),u.codeField=a,u.formValues=l(b);const k={[s||(n?"checked":"value")]:e.formModel[a]},A=d(d(d({},u),I),k);if(!o)return g(j,A,null);const M=x(o)?d({},o(l(b),{disabled:l(S)})):{default:()=>o};return g(j,A,W(M)?M:{default:()=>[M]})}function O(){const{label:o,helpMessage:t,helpComponentProps:a,subLabel:r}=e.schema,s=r?g("span",null,[o,ae(" "),g("span",{class:"text-secondary"},[r])]):o,n=x(t)?t(l(b)):t;return!n||Array.isArray(n)&&n.length===0?s:g("span",null,[s,g(ie,H({placement:"top",class:"mx-1",text:n},a),null)])}function T(){const{itemProps:o,slot:t,render:a,field:r,suffix:s,component:n}=e.schema,{labelCol:c,wrapperCol:I}=l(D),{colon:j}=e.formProps,P={disabled:l(S)};if(n==="Divider"){let p;return g(G,{span:24},{default:()=>[g(be,l(w),W(p=O())?p:{default:()=>[p]})]})}else{const p=()=>t?$(f,t,l(b),P):a?a(l(b),P):y(),u=!!s,L=x(s)?s(l(b)):s;return n&&ue.includes(n)&&e.schema&&(e.schema.itemProps=d({autoLink:!1},e.schema.itemProps)),g(pe.Item,H({name:r,colon:j,class:{"suffix-item":u}},o,{label:O(),rules:_(),labelCol:c,wrapperCol:I}),{default:()=>[g("div",{style:"display:flex"},[g("div",{style:"flex:1;"},[p()]),u&&g("span",{class:"suffix"},[L])])]})}}return()=>{let o;const{colProps:t={},colSlot:a,renderColContent:r,component:s,slot:n}=e.schema;if(!s||!J.has(s)&&!n)return null;const{baseColProps:c={}}=e.formProps,I=d(d({},c),t),{isIfShow:j,isShow:P}=F(),p=l(b),u={disabled:l(S)};return j&&se(g(G,I,W(o=(()=>a?$(f,a,p,u):r?r(p,u):T())())?o:{default:()=>[o]}),[[le,P]])}}});export{Me as _};
